---
import Layout from '../../layouts/Layout.astro';
import Heading1 from '../../components/Heading1.astro';
import Heading2 from '../../components/Heading2.astro';
import NewsletterSignup from '../../components/NewsletterSignup.astro';
import {
  generateBreadcrumbListSchema,
  generateWebPageSchema,
} from '../../lib/schema';

const title = 'Newsletter';
const description =
  'Subscribe to the PWV newsletter for insights on early-stage technology investing, portfolio updates, and perspectives from our founders and community.';

// Get base URL for schema generation
export const isProduction = process.env.CONTEXT === 'production';
export const isDeployPreview = process.env.CONTEXT === 'deploy-preview';
const baseURL = isDeployPreview
  ? process.env.DEPLOY_PRIME_URL || Astro.site
  : Astro.site;
const canonicalURL = new URL('/newsletter', baseURL);

// Generate BreadcrumbList schema
const breadcrumbItems = [
  { name: 'Home', url: new URL('/', baseURL).toString() },
  { name: 'Newsletter', url: canonicalURL.toString() },
];
const breadcrumbSchema = generateBreadcrumbListSchema({
  items: breadcrumbItems,
});

// Generate WebPage schema
const webPageSchema = generateWebPageSchema({
  name: 'PWV Newsletter',
  url: canonicalURL.toString(),
  description: description,
  id: new URL('#webpage', canonicalURL).toString(),
  publisher: {
    id: new URL('#organization', baseURL).toString(),
  },
  isPartOf: {
    id: new URL('#website', baseURL).toString(),
  },
});
---

<Layout
  title={title}
  description={description}
  additionalSchemas={[{ schema: breadcrumbSchema }, { schema: webPageSchema }]}
>
  <section class="mx-auto">
    <Heading1>PWV Newsletter</Heading1>

    <div class="border-pwv-gray mb-12 border-b pb-8">
      <NewsletterSignup variant="inline" showLearnMore={false} />
    </div>

    <Heading2>What You'll Get</Heading2>

    <div class="mb-8 space-y-6">
      <div>
        <h3 class="text-pwv-black mb-2 text-lg font-semibold">
          Latest News & Announcements
        </h3>
        <p class="text-pwv-black/70 text-base">
          Be the first to know about PWV fund updates, new portfolio companies,
          and major milestones from our investments.
        </p>
      </div>

      <div>
        <h3 class="text-pwv-black mb-2 text-lg font-semibold">
          Founder Insights
        </h3>
        <p class="text-pwv-black/70 text-base">
          Perspectives and lessons learned from Tom Preston-Werner, David Price,
          David Thyresson, and founders in our portfolio.
        </p>
      </div>

      <div>
        <h3 class="text-pwv-black mb-2 text-lg font-semibold">
          Portfolio Updates
        </h3>
        <p class="text-pwv-black/70 text-base">
          Follow the journey of category-defining companies we back, from zero
          to breakout.
        </p>
      </div>

      <div>
        <h3 class="text-pwv-black mb-2 text-lg font-semibold">
          Community Highlights
        </h3>
        <p class="text-pwv-black/70 text-base">
          Curated content from our founders and the broader technology
          community.
        </p>
      </div>
    </div>

    <Heading2>Our Commitment</Heading2>

    <div class="mb-8 space-y-4">
      <p class="text-pwv-black/70">
        We respect your inbox. Our newsletter is thoughtfully curated and sent
        when we have something meaningful to shareâ€”no spam, no noise.
      </p>

      <p class="text-pwv-black/70">
        You can unsubscribe at any time with one click. We value your privacy
        and will never share your email address with third parties.
      </p>
    </div>

    <div class="border-pwv-gray/30 mb-8 rounded-lg border bg-gray-50 p-6">
      <h3 class="text-pwv-black mb-3 text-lg font-semibold">
        Already subscribed?
      </h3>
      <p class="text-pwv-black/70 mb-4 text-sm">
        Make sure to check your spam folder and add us to your contacts to
        ensure you receive our updates. Look for emails from <span
          class="font-mono text-sm">PWV</span
        >.
      </p>
      <p class="text-pwv-black/70 text-sm">
        If you're having trouble with your subscription, you can manage your
        preferences or unsubscribe using the links in any email we send.
      </p>
    </div>

    <div class="mt-12 text-center">
      <a
        href="/"
        class="bg-pwv-black text-pwv-white hover:bg-pwv-green inline-flex items-center gap-2 rounded-lg px-5 py-2 text-sm transition-colors"
      >
        <svg
          class="h-4 w-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Home
      </a>
    </div>
  </section>
</Layout>
