---
import { Image as UnpicImage } from '@unpic/astro';
import { resolveImageSrc } from '../lib/images';

interface Props {
  name: string;
  title: string;
  company: string;
  quote: string;
  url?: string;
  companySlug: string;
}

const { name, title, company, quote, url, companySlug } = Astro.props;
---

<div
  class="flex h-full flex-col rounded-lg border border-gray-200 bg-white p-4"
>
  <blockquote
    class="text-md mb-4 flex-grow border-l-1 border-dotted border-[var(--pwv-blue)] pl-4 text-slate-600"
  >
    "{quote}"
  </blockquote>
  <div class="mt-auto flex flex-col">
    <cite class="font-semibold text-[var(--pwv-blue)] not-italic">
      {name}
    </cite>
    <div class="flex items-center gap-2 text-sm text-gray-600">
      {
        companySlug === 'anonymous' ? (
          <div class="h-4 w-4 flex-shrink-0 rounded bg-gray-300" />
        ) : (
          <UnpicImage
            src={resolveImageSrc(`logos/small/${companySlug}.png`)}
            alt={`${company} logo`}
            width={16}
            height={16}
            class="flex-shrink-0 border border-gray-100 bg-white"
          />
        )
      }
      <span>
        {title},{' '}
        {
          url ? (
            <a href={url} class="text-gray-800 hover:underline">
              {company}
            </a>
          ) : (
            company
          )
        }
      </span>
    </div>
  </div>
</div>
