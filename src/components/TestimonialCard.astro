---
import { Image as UnpicImage } from '@unpic/astro';
import { resolveImageSrc } from '../lib/images';

interface Props {
  name: string;
  title: string;
  company: string;
  quote: string;
  url?: string;
  companySlug: string;
}

const { name, title, company, quote, url, companySlug } = Astro.props;
---

<div
  class="border-default bg-surface flex h-full flex-col rounded-lg border p-4"
>
  <blockquote
    class="text-md border-primary text-muted mb-4 flex-grow border-l-1 border-dotted pl-4"
  >
    "{quote}"
  </blockquote>
  <div class="mt-auto flex flex-col">
    <cite class="text-primary font-semibold not-italic">
      {name}
    </cite>
    <div class="text-muted flex items-center gap-2 text-sm">
      {
        companySlug === 'anonymous' ? (
          <div class="bg-surface-muted h-4 w-4 flex-shrink-0 rounded" />
        ) : (
          <UnpicImage
            src={resolveImageSrc(`logos/small/${companySlug}.png`)}
            alt={`${company} logo`}
            width={16}
            height={16}
            class="border-default bg-surface flex-shrink-0 border p-0.5"
          />
        )
      }
      <span>
        {title},{' '}
        {
          url ? (
            <a href={url} class="text-body hover:underline">
              {company}
            </a>
          ) : (
            company
          )
        }
      </span>
    </div>
  </div>
</div>
