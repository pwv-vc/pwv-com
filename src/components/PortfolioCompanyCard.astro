---
import clsx from 'clsx';
import { Image as UnpicImage } from '@unpic/astro';

interface Props {
  name: string;
  url: string;
  tags: string[];
  slug: string;
}

const { name, url, tags, slug } = Astro.props;

// Companies that need black background for their logos
const blackBackgroundSlugs = ['beta'];

type TagColors = {
  [key: string]: string;
};

const dotColors: TagColors = {
  'aerospace': 'bg-sky-400',
  'hardware': 'bg-orange-400',
  'energy': 'bg-amber-400',
  'dev tools': 'bg-emerald-400',
  'ai': 'bg-purple-400',
  'saas': 'bg-indigo-400',
  'construction': 'bg-cyan-400',
  'board seat': 'bg-teal-400',
  'board seat (past)': 'bg-slate-400',
  'biotech': 'bg-violet-400',
  'food tech': 'bg-lime-400',
  'cad': 'bg-lime-400',
  'acquired': 'bg-neutral-400'
};

// Helper function to get tag styles based on category
const getTagStyle = (tag: string) => {
  const baseStyle = ' text-xs inline-flex items-center mx-1 gap-1.5 px-3 py-1 rounded-full bg-white text-gray-600 text-sm border border-gray-100';
  return {
    container: baseStyle,
    dot: `w-1.5 h-1.5 rounded-full ${dotColors[tag.toLowerCase()] || 'bg-gray-400'}`
  };
};
---

<div class="flex flex-col gap-2 py-1">
  <a href={url} target="_blank" rel="noopener noreferrer" class="flex items-center gap-3 text-sm text-[var(--pwv-blue)] font-mono font-bold hover:underline">
    <UnpicImage
      src={`/src/images/logos/small/${slug}.png`}
      alt={`${name} logo`}
      width={24}
      height={24}
      class={`flex-shrink-0 border border-gray-100 ${blackBackgroundSlugs.includes(slug) ? 'bg-black' : 'bg-white'}`}
    />
    <span class="whitespace-nowrap">{name}</span>
  </a>
  <div class="flex flex-wrap gap-1">
    {tags.map(tag => {
      const styles = getTagStyle(tag);
      return (
        <span class={styles.container}>
          <span class={styles.dot}></span>
          {tag.toLowerCase()}
        </span>
      );
    })}
  </div>
</div>
