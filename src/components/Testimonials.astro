---
import { getCollection } from 'astro:content';
import Heading2 from './Heading2.astro';
import TestimonialCard from './TestimonialCard.astro';

const testimonials = await getCollection('testimonials');
const sortedTestimonials = testimonials.sort((a, b) => {
  return a.data.position - b.data.position;
});
---

<section id="testimonials" class="mx-auto my-8 pt-4">
  <Heading2>What Founders Say</Heading2>
  <!-- Responsive Grid Layout -->
  <div
    class="my-8 grid grid-cols-1 gap-12 md:grid-cols-2 lg:grid-cols-3 lg:gap-6 lg:divide-y-0"
  >
    {
      sortedTestimonials.map((testimonial) => (
        <TestimonialCard
          name={testimonial.data.name}
          title={testimonial.data.title}
          company={testimonial.data.company}
          quote={testimonial.data.quote}
          url={testimonial.data.url}
          companySlug={testimonial.data['company-slug']}
        />
      ))
    }
  </div>
</section>
